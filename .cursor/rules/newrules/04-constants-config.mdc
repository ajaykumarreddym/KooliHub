---
description: App Constants & Configuration Management
globs: **/*.ts,**/*.tsx
---

# Constants & Configuration Management

## Overview
Centralized configuration and constants management to avoid hardcoding values throughout the codebase.

---

## 1. Constants File Structure

### 1.1 File Organization
```
client/lib/
├── constants.ts        # App-wide constants
├── config.ts           # Environment config
├── strings.ts          # UI strings (see typography-strings.mdc)
├── typography.ts       # Typography tokens
├── tokens.ts           # Design tokens
└── api-config.ts       # API configuration
```

---

## 2. App Constants

### 2.1 Main Constants File
**File**: `client/lib/constants.ts`

```typescript
/**
 * Application Constants
 * Centralized configuration values used across the app
 */

// ═══════════════════════════════════════════
// APP CONFIGURATION
// ═══════════════════════════════════════════
export const APP_CONFIG = {
  name: 'KooliHub',
  version: '1.0.0',
  defaultLocale: 'en',
  defaultCurrency: 'INR',
  currencySymbol: '₹',
  defaultTimezone: 'Asia/Kolkata',
  supportEmail: 'support@koolihub.com',
  supportPhone: '+91-1800-XXX-XXXX',
} as const;

// ═══════════════════════════════════════════
// PAGINATION
// ═══════════════════════════════════════════
export const PAGINATION = {
  defaultPageSize: 20,
  pageSizeOptions: [10, 20, 50, 100] as const,
  maxPageSize: 100,
  infiniteScrollThreshold: 200, // pixels from bottom
} as const;

// ═══════════════════════════════════════════
// FORM LIMITS
// ═══════════════════════════════════════════
export const FORM_LIMITS = {
  // Text fields
  nameMinLength: 2,
  nameMaxLength: 100,
  descriptionMaxLength: 1000,
  shortDescriptionMaxLength: 200,
  
  // Password
  passwordMinLength: 8,
  passwordMaxLength: 128,
  
  // Numbers
  maxPrice: 1000000,
  maxQuantity: 9999,
  maxDiscount: 100,
  
  // Phone/Pincode
  phoneLength: 10,
  pincodeLength: 6,
  
  // Textarea
  notesMaxLength: 500,
  reviewMaxLength: 2000,
} as const;

// ═══════════════════════════════════════════
// FILE UPLOAD
// ═══════════════════════════════════════════
export const UPLOAD = {
  maxFileSize: 10 * 1024 * 1024, // 10MB
  maxFileSizeMB: 10,
  maxImages: 10,
  maxDocuments: 5,
  
  allowedImageTypes: ['image/jpeg', 'image/png', 'image/webp', 'image/gif'] as const,
  allowedImageExtensions: ['.jpg', '.jpeg', '.png', '.webp', '.gif'] as const,
  
  allowedDocumentTypes: ['application/pdf', 'application/msword'] as const,
  allowedDocumentExtensions: ['.pdf', '.doc', '.docx'] as const,
  
  imageQuality: 0.8,
  thumbnailSizes: [150, 300, 600] as const,
} as const;

// ═══════════════════════════════════════════
// API TIMEOUTS
// ═══════════════════════════════════════════
export const TIMEOUTS = {
  api: 30000,         // 30 seconds
  upload: 120000,     // 2 minutes
  search: 5000,       // 5 seconds
  debounce: 300,      // 300ms for search
  throttle: 1000,     // 1 second
  toast: 5000,        // 5 seconds
  sessionRefresh: 5 * 60 * 1000, // 5 minutes
} as const;

// ═══════════════════════════════════════════
// CACHE DURATIONS
// ═══════════════════════════════════════════
export const CACHE = {
  // React Query
  staleTime: 5 * 60 * 1000,      // 5 minutes
  cacheTime: 10 * 60 * 1000,     // 10 minutes
  
  // Real-time debounce
  realtimeDebounce: 500,          // 500ms
  
  // Local storage
  locationCacheDuration: 24 * 60 * 60 * 1000, // 24 hours
  
  // Prefetch
  prefetchStaleTime: 30 * 1000,   // 30 seconds
} as const;

// ═══════════════════════════════════════════
// BREAKPOINTS (match Tailwind)
// ═══════════════════════════════════════════
export const BREAKPOINTS = {
  xs: 320,
  sm: 640,
  md: 768,
  lg: 1024,
  xl: 1280,
  '2xl': 1400,
} as const;

// ═══════════════════════════════════════════
// Z-INDEX SCALE
// ═══════════════════════════════════════════
export const Z_INDEX = {
  behind: -1,
  base: 0,
  dropdown: 10,
  sticky: 20,
  fixed: 30,
  modalBackdrop: 40,
  modal: 50,
  popover: 60,
  tooltip: 70,
  toast: 100,
  selectContent: 10000,
  max: 9999,
} as const;

// ═══════════════════════════════════════════
// ORDER STATUS
// ═══════════════════════════════════════════
export const ORDER_STATUS = {
  PENDING: 'pending',
  CONFIRMED: 'confirmed',
  PROCESSING: 'processing',
  PACKED: 'packed',
  SHIPPED: 'shipped',
  OUT_FOR_DELIVERY: 'out_for_delivery',
  DELIVERED: 'delivered',
  CANCELLED: 'cancelled',
  RETURNED: 'returned',
  REFUNDED: 'refunded',
} as const;

export const ORDER_STATUS_FLOW = [
  ORDER_STATUS.PENDING,
  ORDER_STATUS.CONFIRMED,
  ORDER_STATUS.PROCESSING,
  ORDER_STATUS.PACKED,
  ORDER_STATUS.SHIPPED,
  ORDER_STATUS.OUT_FOR_DELIVERY,
  ORDER_STATUS.DELIVERED,
] as const;

// ═══════════════════════════════════════════
// USER ROLES
// ═══════════════════════════════════════════
export const USER_ROLES = {
  ADMIN: 'admin',
  VENDOR_ADMIN: 'vendor_admin',
  VENDOR_USER: 'vendor_user',
  CUSTOMER: 'customer',
  GUEST: 'guest',
} as const;

// ═══════════════════════════════════════════
// VENDOR STATUS
// ═══════════════════════════════════════════
export const VENDOR_STATUS = {
  PENDING_APPROVAL: 'pending_approval',
  ACTIVE: 'active',
  INACTIVE: 'inactive',
  SUSPENDED: 'suspended',
} as const;

// ═══════════════════════════════════════════
// OFFERING TYPES
// ═══════════════════════════════════════════
export const OFFERING_TYPES = {
  PRODUCT: 'product',
  SERVICE: 'service',
  RIDE: 'ride',
  DELIVERY: 'delivery',
  BOOKING: 'booking',
  RENTAL: 'rental',
  SUBSCRIPTION: 'subscription',
  DIGITAL: 'digital',
} as const;

// ═══════════════════════════════════════════
// PAYMENT STATUS
// ═══════════════════════════════════════════
export const PAYMENT_STATUS = {
  PENDING: 'pending',
  COMPLETED: 'completed',
  FAILED: 'failed',
  REFUNDED: 'refunded',
  PARTIALLY_REFUNDED: 'partially_refunded',
} as const;

// ═══════════════════════════════════════════
// TRIP STATUS
// ═══════════════════════════════════════════
export const TRIP_STATUS = {
  SCHEDULED: 'scheduled',
  ACTIVE: 'active',
  COMPLETED: 'completed',
  CANCELLED: 'cancelled',
} as const;

// ═══════════════════════════════════════════
// BOOKING STATUS
// ═══════════════════════════════════════════
export const BOOKING_STATUS = {
  PENDING: 'pending',
  CONFIRMED: 'confirmed',
  CANCELLED: 'cancelled',
  COMPLETED: 'completed',
  NO_SHOW: 'no_show',
} as const;

// ═══════════════════════════════════════════
// VEHICLE TYPES
// ═══════════════════════════════════════════
export const VEHICLE_TYPES = {
  CAR: 'car',
  SUV: 'suv',
  VAN: 'van',
  BUS: 'bus',
  BIKE: 'bike',
  AUTO: 'auto',
} as const;

// ═══════════════════════════════════════════
// SERVICE ICONS
// ═══════════════════════════════════════════
export const SERVICE_ICONS = {
  grocery: 'ShoppingCart',
  trips: 'Car',
  handyman: 'Wrench',
  fashion: 'Shirt',
  electronics: 'Smartphone',
  beauty: 'Sparkles',
  'car-rental': 'CarFront',
  'home-kitchen': 'Home',
  pharmacy: 'Pill',
  'food-delivery': 'UtensilsCrossed',
} as const;

// ═══════════════════════════════════════════
// STATIC URLS
// ═══════════════════════════════════════════
export const URLS = {
  // External links
  termsOfService: '/terms',
  privacyPolicy: '/privacy',
  helpCenter: '/help',
  
  // Default images
  defaultAvatar: '/images/default-avatar.png',
  defaultProduct: '/images/default-product.png',
  defaultVendor: '/images/default-vendor.png',
  placeholder: '/images/placeholder.png',
  
  // Social
  facebook: 'https://facebook.com/koolihub',
  twitter: 'https://twitter.com/koolihub',
  instagram: 'https://instagram.com/koolihub',
} as const;

// ═══════════════════════════════════════════
// REGEX PATTERNS
// ═══════════════════════════════════════════
export const PATTERNS = {
  email: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
  phone: /^[6-9]\d{9}$/,  // Indian mobile
  pincode: /^\d{6}$/,     // Indian pincode
  gst: /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,
  pan: /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,
  url: /^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([\/\w .-]*)*\/?$/,
  slug: /^[a-z0-9]+(?:-[a-z0-9]+)*$/,
} as const;

// ═══════════════════════════════════════════
// TYPE EXPORTS
// ═══════════════════════════════════════════
export type OrderStatus = typeof ORDER_STATUS[keyof typeof ORDER_STATUS];
export type UserRole = typeof USER_ROLES[keyof typeof USER_ROLES];
export type VendorStatus = typeof VENDOR_STATUS[keyof typeof VENDOR_STATUS];
export type OfferingType = typeof OFFERING_TYPES[keyof typeof OFFERING_TYPES];
export type PaymentStatus = typeof PAYMENT_STATUS[keyof typeof PAYMENT_STATUS];
export type TripStatus = typeof TRIP_STATUS[keyof typeof TRIP_STATUS];
export type BookingStatus = typeof BOOKING_STATUS[keyof typeof BOOKING_STATUS];
export type VehicleType = typeof VEHICLE_TYPES[keyof typeof VEHICLE_TYPES];
```

---

## 3. Environment Configuration

### 3.1 Config File
**File**: `client/lib/config.ts`

```typescript
/**
 * Environment Configuration
 * Runtime configuration based on environment variables
 */

// ═══════════════════════════════════════════
// ENVIRONMENT
// ═══════════════════════════════════════════
export const ENV = {
  isDev: import.meta.env.DEV,
  isProd: import.meta.env.PROD,
  mode: import.meta.env.MODE,
} as const;

// ═══════════════════════════════════════════
// SUPABASE CONFIG
// ═══════════════════════════════════════════
export const SUPABASE_CONFIG = {
  url: import.meta.env.VITE_SUPABASE_URL || '',
  anonKey: import.meta.env.VITE_SUPABASE_ANON_KEY || '',
  
  // Storage buckets
  buckets: {
    assets: 'assets',
    avatars: 'avatars',
    products: 'products',
    documents: 'documents',
  },
} as const;

// ═══════════════════════════════════════════
// FIREBASE CONFIG
// ═══════════════════════════════════════════
export const FIREBASE_CONFIG = {
  apiKey: import.meta.env.VITE_FIREBASE_API_KEY || '',
  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN || '',
  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID || '',
  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET || '',
  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID || '',
  appId: import.meta.env.VITE_FIREBASE_APP_ID || '',
  measurementId: import.meta.env.VITE_FIREBASE_MEASUREMENT_ID || '',
  vapidKey: import.meta.env.VITE_FIREBASE_VAPID_KEY || '',
} as const;

// ═══════════════════════════════════════════
// API CONFIG
// ═══════════════════════════════════════════
export const API_CONFIG = {
  baseUrl: import.meta.env.VITE_API_URL || '/api',
  timeout: 30000,
  
  endpoints: {
    auth: '/auth',
    products: '/products',
    categories: '/categories',
    vendors: '/vendors',
    orders: '/orders',
    upload: '/upload',
    admin: '/admin',
  },
} as const;

// ═══════════════════════════════════════════
// MAPS CONFIG
// ═══════════════════════════════════════════
export const MAPS_CONFIG = {
  defaultCenter: {
    lat: 17.3850,  // Hyderabad
    lng: 78.4867,
  },
  defaultZoom: 12,
  maxZoom: 18,
  minZoom: 5,
  tileUrl: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
  attribution: '&copy; OpenStreetMap contributors',
} as const;

// ═══════════════════════════════════════════
// FEATURE FLAGS
// ═══════════════════════════════════════════
export const FEATURES = {
  darkMode: true,
  notifications: true,
  analytics: ENV.isProd,
  debugMode: ENV.isDev,
  maintenanceMode: false,
  
  // Service toggles
  tripBooking: true,
  carRental: true,
  handyman: true,
  grocery: true,
} as const;

// ═══════════════════════════════════════════
// VALIDATION
// ═══════════════════════════════════════════
// Ensure required env vars are present
const validateConfig = () => {
  const required = ['VITE_SUPABASE_URL', 'VITE_SUPABASE_ANON_KEY'];
  const missing = required.filter(key => !import.meta.env[key]);
  
  if (missing.length > 0) {
    console.error(`Missing required environment variables: ${missing.join(', ')}`);
  }
};

// Run validation in development
if (ENV.isDev) {
  validateConfig();
}
```

---

## 4. Usage Examples

### 4.1 Using Constants
```typescript
import { 
  PAGINATION, 
  FORM_LIMITS, 
  ORDER_STATUS,
  TIMEOUTS 
} from '@/lib/constants';

// In React Query
const { data } = useQuery({
  queryKey: ['products'],
  queryFn: fetchProducts,
  staleTime: CACHE.staleTime,
});

// In forms
const schema = z.object({
  name: z.string()
    .min(FORM_LIMITS.nameMinLength)
    .max(FORM_LIMITS.nameMaxLength),
  description: z.string()
    .max(FORM_LIMITS.descriptionMaxLength)
    .optional(),
});

// In pagination
<Pagination
  pageSize={PAGINATION.defaultPageSize}
  pageSizeOptions={PAGINATION.pageSizeOptions}
/>

// In status checks
if (order.status === ORDER_STATUS.DELIVERED) {
  // Handle delivered order
}
```

### 4.2 Using Config
```typescript
import { API_CONFIG, FEATURES, MAPS_CONFIG } from '@/lib/config';

// API calls
const response = await fetch(`${API_CONFIG.baseUrl}/products`);

// Feature flags
{FEATURES.tripBooking && <TripBookingSection />}

// Maps
<Map 
  center={MAPS_CONFIG.defaultCenter}
  zoom={MAPS_CONFIG.defaultZoom}
/>
```

---

## 5. Rules Summary

### DO:
- ✅ Define all magic numbers/strings as constants
- ✅ Group related constants together
- ✅ Export TypeScript types for enum-like constants
- ✅ Use environment variables for sensitive/varying config
- ✅ Validate required config in development

### DON'T:
- ❌ Hardcode values like `pageSize: 20`
- ❌ Use string literals for status values
- ❌ Put API keys directly in code
- ❌ Duplicate constant definitions
- ❌ Mix business logic with constants

---

**Related Files**:
- `client/lib/constants.ts` - App constants
- `client/lib/config.ts` - Environment config
- `client/lib/strings.ts` - String constants
